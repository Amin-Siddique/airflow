#first create namespace where every resource related to airflow will belong:
kubectl create namespace  airflow

## create secret & traefik before to avoid pod initiation issue: edit hostname: C:\Windows\System32\drivers\etc
# apply the secret for gitSync:
kubectl apply -f secret.yaml -n airflow
# run traefik to run airflow UI on localhost
helm upgrade --install traefik traefik/traefik -f values_ingress.yaml
kubectl apply -f .\ingress_traefik.yaml

# airflow helm:
helm install airflow apache-airflow/airflow --namespace airflow --create-namespace  --debug
helm show values apache-airflow/airflow > values.yaml
helm upgrade --install airflow apache-airflow/airflow -n airflow -f values.yaml --debug



#if not traefik then run locally:
kubectl port-forward svc/airflow-webserver 8081:8080 --namespace airflow

#restart container:
kubectl rollout restart deployment airflow-scheduler -n airflow
kubectl rollout restart deployment airflow-webserver -n airflow

helm delete airflow --namespace airflow

kubectl create namespace airflow
kubectl delete namespace airflow

##https://helm.sh/docs/helm/helm_get_manifest/
helm show chart apache-airflow/airflow --version 1.10.0  > chart.yaml
helm get manifest airflow -n airflow > manifest.yaml


docker logout
docker login
docker push {username}/{imagename}:{versionNumber}


## get .kubeconfig file:
kubectl config view --minify --flatten
kubectl config use-context docker-desktop  #set context